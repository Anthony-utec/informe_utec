---
title: "Estudio sobre la relación entre las tecnologías que usan los desarrolladores en su trabajo y su salud mental"
output: 
  html_document:
    toc: true
    toc_float:
      collapsed: false
      smooth_scroll: true
---

## Introducción

Hablar del mundo de la programación es adentrarse en un universo inmenso, lleno de posibilidades y retos. Sin embargo, si nuestro objetivo es adentrarnos en este mundo, debemos tomar en cuenta nuestra salud por encima de todo.

### Relevancia e importancia

Actualmente, el uso de tecnologías de desarrollo ha aumentado significativamente en los últimos años. Han surgido carreras como Ciencia de la Computación, Ciencia de Datos, Sistemas de Información, entre otras, debido a la creciente tendencia de incorporar lenguajes de programación en la educación para formar nuevos desarrolladores interesados en STEM. Por lo tanto, si nos enfocamos en este campo, sería muy útil conocer cómo el lenguaje de programación influye en nuestra calidad de vida según la experiencia de los desarrolladores que trabajan en ello.

### Planificación y Factibilidad

Consideramos que el proyecto es viable ya que usamos bases de datos de fuentes confiables como Stack Overflow (la cual es una plataforma abierta y la base de datos resume información pública) y la otra de PLDB (un proyecto Open Source creado por desarrolladores para la recolección de datos sobre lenguajes de programación)

#### Planificación (Diagrama de Gantt)

Para entender el desarrollo del estudio hasta el momento, se muestra el siguiente **Diagrama de Gantt** con la planificación de las diferentes actividades y entregas del proyecto.

```{r warning=FALSE, echo=FALSE}

library(DiagrammeR)

mermaid("
gantt
dateFormat  YYYY-MM-DD
title Diagrama de Gantt

section Main things
Preparar PG01:first_1,2023-04-15, 3d
Entrega PG01:first_2,2023-04-18, 2d
Preparar PG02:first_3,2023-04-20, 11d
Entrega PG02:first_4,2023-05-01, 2d
Preparar PG03:first_5,2023-05-03, 21d
Entrega PG03:first_6,2023-05-24, 2d
Informe PG1:first_7,2023-05-26, 9d
Entrega Informe:first_8, 2023-06-04,1d

section PG01
Diagrama de Gantt:first_1, 2023-04-15, 12h
Delimitar tema:first_2, after first_1, 12h
Variables de analisis: first_3, after first_2, 6h
Limpieza de la base de datos: first_4, after first_2, 12h
Analizar la factibilidad: first_5, after first_3, 1d

section PG02
Replantear objetivos:first_6, 2023-04-20, 1d
Limpieza de tablas:first_7, after first_6, 5d
Corrección de variables:first_8, after first_7, 5d

section PG03
Análisis univariado:first_9, 2023-05-03, 12d
Análisis bivariado:first_10, 2023-05-10, 10d
Análisis multivariado:first_11, 2023-05-15, 7d
Escribir análisis:first_12, after first_11, 2d

section Informe PG1
Correcciones:first_13, 2023-05-26, 3d
Union de PG0x:first_14, after first_13, 2d
Verificar ortografía:first_15, after first_14, 2d
Informe prolijo:first_16, after first_15, 2d
")
```

## Objetivos

### Objetivo principal

Demostrar que la salud mental del programador depende, en parte, del lenguaje de programación que escoja para trabajar.

### Objetivos secundarios

-   Demostrar que la popularidad de un lenguaje de programación no significa que trabajar con este brinde un mejor estado de salud mental.

-   Encontrar una relación entre el acceso a información del lenguaje de programación escogido por el programador y su salud mental.

-   Encontrar una relación entre el salario que brinda el lenguaje de programación que usan los desarrolladores con su salud mental.

-   Demostrar la relación entre el sistema operativo utilizado en el ámbito profesional y la salud mental de los individuos, y encontrar una posible asociación entre los problemas mentales y el tipo de sistema operativo.

## Datos

### Recolección de datos

Nuestros datos se basarán en dos bases de datos:

-   Programming language database (PLDB):
    -   Contiene información acerca de +4000 lenguajes de programación incluyendo su año de creación, el tipo (query, programación, etiquetado, etc.), cantidad de usuarios, cantidad de trabajadores, entre otros.
-   Survey_results 2022 (Stack Overflow):
    -   Contiene información de una encuesta realizada a desarrolladores de todo el mundo relacionados a la experiencia de programación. Incluyen demografía, educación, puesto de trabajo, lenguaje de programación, salud mental, entre otros.

## Población, muestra y muestreo

### Población

Nuestra población se centra en la comunidad de desarrolladores y programadores de Stack Overflow, ya que la mayoría de ellos utiliza los lenguajes de programación de forma profesional.

### Muestra

Un programador/a que sea usuario de Stack Overflow.

### Muestreo

Al utilizar bases de datos, no utilizamos una técnica de muestreo. No obstante, la técnica utilizada por Stack Overflow para la recolección de sus datos fue el uso de una encuesta voluntaria para los usuarios de la plataforma.

## Variables de estudio iniciales

En resumen, en esta sección se registran todas las variables que consideramos útiles para nuestro estudio para cada base de datos utilizada. En un principio, hay un total de `25` variables.

### Encuestas de Stak Overflow

| Nombre de la variable   | Tipo de variable   | Descripción                                                        | Restricciones                   |
|---------------|---------------|-----------------------------|---------------|
| MainBranch              | Categórica nominal | Contiene información sobre el estado profesional del desarrollador | \-                              |
| Employment              | Categórica nominal | El tipo de empleo que tiene le desarrollador                       | separado por punto y coma       |
| RemoteWork              | Categórica nominal | De que forma ejercen el trabajo remoto                             | \-                              |
| CodingActivities        | Categórica Nominal | El modo en que ven a programación                                  | separada por punto y coma       |
| DevType                 | Categórica Nominal | Tipo de desarrollador, lista separada por comas                    | separada por punto y coma       |
| Country                 | Categórica Nominal | País del desarollador                                              | \-                              |
| EdLevel                 | Categórica Nominal | Info sobre el nivel de educación                                   | \-                              |
| Currency                | Categórica Nominal | El tipo de moneda que usan                                         | \-                              |
| ConvertedCompYearly     | Numérica Continua  | Cuanto ganan anualmente en dólares                                 | \>0                             |
| Mental Health           | Categórica Nominal | Como considera que está su salud mental                            | \-                              |
| Ethnicity               | Categórica Nominal | Raza del desarrollador                                             | \-                              |
| Gender                  | Categórica Nominal | Género                                                             | man, woman y prefer not to say. |
| Age                     | Categórica Ordinal | Edad                                                               | +18 (Es un rango de edad)       |
| OpSysProfessional use   | Categórica Nominal | Sistema operativo que usan para trabajar profesionalmente          | separada por punto y coma       |
| OpSysPersonal use       | Categórica Nominal | Sistema operativo que usan para ellos mismos                       | separada por punto y coma       |
| LanguagesHaveWorkedWith | Categótica Nominal | Lista de los lenguajes que han usado                               | separada por punto y coma       |

### PLDB Lenguajes de Programación

| Nombre de la variable | Tipo de variable   | Descripción                                                       | Restricciones                   |
|---------------|---------------|-----------------------------|---------------|
| Title                 | Categórica Nominal | Nombre original del lenguaje de programación                      | \-                              |
| Appeared              | Numérica discreta  | Año en donde apareció por primera vez el lenguaje de programación | \>= 1945                        |
| Rank                  | Numérica discreta  | Un ranking hecho por PLDB                                         | \>=0                            |
| Type                  | Categórica Nominal | El tipo de lenguaje del que se trata                              | Debe ser "pl" o "queryLanguage" |
| numberOfJobs          | Numérica discreta  | Número de trabajos relacionados al lenguaje de programación       | \>0 (que sea entero)            |
| numberOfUsers         | Numérica discreta  | Número de usuarios que usan el lenguaje                           | \>10 (que sea entero)           |
| Country               | Categórica Nominal | País de creación del lenguaje                                     | \-                              |
| githubLanguage_repos  | Numérica discreta  | Cantidad de repositorios que existen en github con ese lenguaje   | \>1 (que sea entero)            |
| githubBigQuery_repos  | Numérica discreta  | Cantidad de repositorios que existen en BigQuery con ese lenguaje | \>1 (que sea entero)            |

## Librerías

### Carga de librerías

```{r warning=FALSE, echo = TRUE}

#install.packages("tidyverse")

library(readr)
library(dplyr)
library(readr)
library(ggplot2)
library(tidyverse)
library(stringr)
```

### Carga de datos

```{r warning=FALSE}
planguages <- read_csv("Programming_languages.csv")
encuesta <- read_csv("survey_results_public.csv")
```

## Limpieza de Datos

### Limpieza de "Programming Languages Data Base"

Se procederá a limpiar la base de datos `Programming_languages.csv`.

### Borrado de columnas innecesarias

Veamos cuántas filas y columnas tiene nuestro `planguages`:

```{r}
nrow(planguages)
ncol(planguages)
```

Como se puede ver, hay muchas columnas (en total 353) que no utilizaremos.

Por ello, procedemos a limpiar nuestro `planguages`, centrándonos en las variables que nos interesan, las cuales son: `Title`, `Appeared`, `Type`, `Rank`, `numberOfJobs`, `numberOfUsers`, `Country`, `githubLanguage.repos` y `githubBigQuery.repos`.

Vamos a eliminar las columnas que no necesitemos:

```{r}
planguages <- select(planguages, title, appeared, type, rank, numberOfJobs, numberOfUsers, country, githubLanguage.repos, githubBigQuery.repos)
```

Renombraremos las variables para una mejor manipulación:

```{r}
planguages %>% rename(Nombre = title,
                     Año = appeared,
                     Tipo = type,
                     Rank = rank,
                     N_Trabajos = numberOfJobs,
                     N_Usuarios = numberOfUsers,
                     País = country,
                     Github_repos = githubLanguage.repos,
                     BigQuery_repos = githubBigQuery.repos) -> planguages
```

### Limpieza de Datos no útiles

Consideraremos los lenguajes de programación que hayan sido creados posteriores e iguales al año 1945:

```{r}
planguages$Año[planguages$Año < 1945] <- NA
```

La variable `Tipo` debe corresponder a lenguajes de programación `pl`, `queryLanguage`, `textMarkup` o `stylesheetLanguage`\`.

```{r}
planguages <- planguages[planguages$Tipo == "pl" | planguages$Tipo == "queryLanguage" | planguages$Tipo == "textMarkup" | planguages$Tipo == "stylesheetLanguage" ,]
```

El ranking empieza en 0. Vamos a sumar 1 a cada fila de esta variable:

```{r}
planguages$Rank <- planguages$Rank + 1
```

Escogemos los lenguajes que tengan al menos 1 trabajador:

```{r}
planguages$N_Trabajos[planguages$N_Trabajos == 0] <- NA
```

Escogemos los lenguajes que tengan más de 10 usuarios:

```{r}
planguages <- planguages[planguages$N_Usuarios > 10,] 
```

Seleccionamos los lenguajes donde al menos exista un repositorio al buscar en Github

```{r}
planguages$Github_repos[planguages$Github_repos == 0] <- NA
```

Seleccionamos los lenguajes donde al menos exista un repositorio al buscar en BigQuery

```{r}
planguages$BigQuery_repos[planguages$BigQuery_repos == 0] <- NA
```

Usaremos algunos lenguajes de programación, para que coincida con los usados por los usuarios de Stackoverflow

```{r}
languages <- c('APL', 'Assembly', 'Bash', 'C', 'C#', 'C++', 'Clojure', 'COBOL', 'Crystal', 'Dart', 'Delphi', 'Elixir', 'Erlang', 'F#', 'Fortran', 'Go', 'Groovy', 'Haskell', 'HTML','CSS', 'Java', 'JavaScript', 'Julia', 'Kotlin', 'LISP', 'Lua', 'MATLAB', 'OCaml', 'Objective-C', 'Perl', 'PHP', 'PowerShell', 'Python', 'R', 'Ruby', 'Rust', 'SAS', 'Scala', 'Solidity', 'SQL', 'Swift', 'TypeScript', 'VBA')
```

```{r}
df <- data.frame()

agregar_fila <- function(fila) {
  df <- rbind(df, fila)
}

for (i in 1:nrow(planguages)){
  if (planguages$Nombre[i] %in% languages){
    fila <- subset(planguages, Nombre == planguages$Nombre[i])
    df <- rbind(df, fila)
  }
}

planguages <- df
```

### Limpieza de "Survey Results"

### Borrado de columnas innecesarias

```{r}
encuesta <- select(encuesta, MainBranch, Employment, RemoteWork, CodingActivities, DevType, Country, EdLevel, Currency, ConvertedCompYearly, MentalHealth, Ethnicity, Gender, Age, `OpSysPersonal use`, `OpSysProfessional use`, LanguageHaveWorkedWith)
```

Renombraremos las variables para una mejor manipulación:

```{r}
encuesta %>% rename(Salary = ConvertedCompYearly,
                    PersonalOS = `OpSysPersonal use`,
                    ProfessionalOS = `OpSysProfessional use`,
                    ProgLanguages = LanguageHaveWorkedWith) -> encuesta
```

Casos completos:

```{r}
table(complete.cases(encuesta))
```

Solo 34672 casos están completos. Seleccionaremos justo estos.

```{r}
encuesta <- na.omit(encuesta)
```

### Limpieza de Datos no útiles

Para la variable `salario`, buscamos desarrolladores que ganen mínimo 3600 dólares anuales. Y para el máximo, no consideraremos los valores atípicos que sobrepasen el tercer cuantil más 1.5 veces el Rango Intercuantil, es decir, menores a `249153`

```{r}
encuesta <- encuesta[encuesta$Salary > 3600, ]

ric <- IQR(encuesta$Salary)

q1 <- quantile(encuesta$Salary)[2]
q3 <- quantile(encuesta$Salary)[4]

encuesta <- encuesta[encuesta$Salary < q3 + 1.5 * ric, ]
```

En la encuesta se permite elegir géneros de varios tipos. Sin embargo, para fines de estudio nos limitaremos a hombre o mujeres, más obviaremos a los no binarios, entre otros.

```{r}
encuesta <- encuesta[encuesta$Gender == "Man" | encuesta$Gender == "Woman",]
```

Con respecto a las edades, eliminaremos a los que no prefirieron responder.

```{r}
encuesta <- encuesta[encuesta$Age != "Prefer not to say",]
```

En la variable `MentalHealth`, eliminaremos los datos que contengan "*in your own words*" o "*prefer not to say*"

```{r}
encuesta <- encuesta[!str_detect(encuesta$MentalHealth, "in your own words"),]

encuesta <- encuesta[!str_detect(encuesta$MentalHealth, "Prefer not to say"),]
```

### Creación de columnas

#### Lenguajes de Programación

Crearemos columnas para cada lenguaje de programación, esto con el fin de poder hacer un análisis más sencillo.

```{r}
language <- encuesta %>%
  separate_rows(ProgLanguages, sep = ";") %>%
  group_by(ProgLanguages) %>%
  summarize() %>%
  pull()

for (name in language) {
  encuesta[name] = FALSE
}

for (i in 1:nrow(encuesta)) {
  for (elem in unlist(strsplit(encuesta$ProgLanguages[i],";"))){
    encuesta[i, elem] <- TRUE
  }
}
```

#### Mental Health

También crearemos columnas para cada problema mental.

```{r}
columna_booleana <- str_detect(encuesta$MentalHealth, paste0("\\b", "concentration", "\\b"))
encuesta$Memoria <- columna_booleana

columna_booleana <- str_detect(encuesta$MentalHealth, paste0("\\b", "mood", "\\b"))
encuesta$Emocional <- columna_booleana

columna_booleana <- str_detect(encuesta$MentalHealth, paste0("\\b", "anxiety", "\\b"))
encuesta$Ansiedad <- columna_booleana

columna_booleana <- str_detect(encuesta$MentalHealth, paste0("\\b", "autism", "\\b"))
encuesta$Autismo <- columna_booleana

columna_booleana <- str_detect(encuesta$MentalHealth, paste0("\\b", "learning", "\\b"))
encuesta$Aprendizaje <- columna_booleana
```

#### Sistemas operativos

Y también creamos columnas para cada sistema operativo

```{r}
encuesta$BSD <- logical(nrow(encuesta))
encuesta$Linux_Based <- logical(nrow(encuesta))
encuesta$Windows <- logical(nrow(encuesta))
encuesta$Windows_for_Linux <- logical(nrow(encuesta))
encuesta$Mac <- logical(nrow(encuesta))

opciones_a_verificar <- c("BSD", "Linux-based", "Windows", "Windows Subsystem for Linux (WSL)", "macOS")

columna_booleana <- str_detect(encuesta$ProfessionalOS, paste0("\\b", "BSD", "\\b"))
encuesta$BSD <- columna_booleana

columna_booleana <- str_detect(encuesta$ProfessionalOS, paste0("\\b", "based", "\\b"))
encuesta$Linux_Based <- columna_booleana

columna_booleana <- str_detect(encuesta$ProfessionalOS, paste0("\\b", "Windows", "\\b"))
encuesta$Windows <- columna_booleana

columna_booleana <- str_detect(encuesta$ProfessionalOS, paste0("\\b", "Subsystem", "\\b"))
encuesta$Windows_for_Linux <- columna_booleana

columna_booleana <- str_detect(encuesta$ProfessionalOS, paste0("\\b", "macOS", "\\b"))
encuesta$Mac <- columna_booleana
```

```{r}
nrow(encuesta)
```

En total tenemos `28679` observaciones para nuestro estudio.

## Variables de estudio Finales

Luego de la limpieza, decidimos mantenernos con `12` variables que se relacionan con nuestros objetivos de investigación.

### Encuestas de Stakoverflow

| Nombre de la variable | Tipo de variable   | Descripción                                               | Restricciones                                        |
|--------------|--------------|-----------------------|---------------------|
| Age                   | Categórica Ordinal | Edad                                                      | \-                                                   |
| Gender                | Categórica Ordinal | Género                                                    | Man y Woman                                          |
| Salary                | Numérica Contínua  | El salario anual en dólares del desarrollador             | [3600 - 249153]                                      |
| MentalHealth          | Categórica Ordinal | Como considera que está su salud mental                   | Se omiten "*In your own words*" y "*Prefer not say*" |
| ProfessionalOP        | Categórica Ordinal | Sistema operativo que usan para trabajar profesionalmente | Se separan en columnas de TRUE y FALSE               |
| ProgrLanguages        | Categórica Ordinal | Lista de los lenguajes que han usado                      | Se separan en columnas de TRUE y FALSE               |

### PLDB Lenguajes de Programación

| Nombre de la variable | Tipo de variable   | Descripción                                                       | Restricciones                                                               |
|--------------|--------------|---------------------|-------------------------|
| Nombre                | Categórica Nominal | Nombre original del lenguaje de programación                      | Deben estar los mismos lenguajes de la encuesta de StackOverflow            |
| Type                  | Categórica Ordinal | El tipo de lenguaje del que se trata                              | Debe ser "*pl*", "*queryLanguage*", "*textMarkup*" y "*stylesheetLanguage*" |
| N_Trabajos            | Numérica Discreta  | Número de trabajos relacionados al lenguaje de programación       | Debe ser mayor a 0                                                          |
| N_Usuarios            | Numérica Discreta  | Número de usuarios que usan el lenguaje                           | Debe ser mayor a 0                                                          |
| Github_repos          | Numérica Discreta  | Cantidad de repositorios que existen en Github con ese lenguaje   | Mayor a 1                                                                   |
| BigQuery_repos        | Numérica Discreta  | Cantidad de repositorios que existen en BigQuery con ese lenguaje | Mayor a 1                                                                   |

## Preguntas e Hipótesis

#### Pregunta 1:

-   ¿Existe una relación entre el lenguaje de programación utilizado por un desarrollador y su salud mental?

Hipótesis:

-   La elección del lenguaje de programación utilizado por un desarrollador influye en su salud mental. Se espera que algunos lenguajes de programación estén asociados con niveles más altos de estrés o frustración, mientras que otros puedan promover una mayor satisfacción y bienestar.

#### Pregunta 2:

-   ¿Hay alguna relación entre la popularidad de un lenguaje de programación y la satisfacción laboral de los programadores que lo utilizan?

Hipótesis:

-   No existe una correlación significativa entre la popularidad de un lenguaje de programación y la satisfacción laboral de los programadores. Se espera que la satisfacción laboral esté influenciada por otros factores, como la dificultad del lenguaje, el acceso a información que este brinda, entre otros.

#### Pregunta 3:

-   ¿Existe una relación entre el acceso a información relevante sobre un lenguaje de programación y la salud mental de los programadores que lo utilizan?

Hipótesis:

-   El acceso a información adecuada sobre un lenguaje de programación está relacionado con una mejor salud mental de los programadores. Se espera que los desarrolladores que tienen un fácil acceso a recursos de aprendizaje y documentación de su lenguaje de programación experimenten mejores estados mentales.

#### Pregunta 4:

-   ¿Hay una relación entre el salario asociado a un lenguaje de programación y la salud mental de los programadores que lo utilizan?

Hipótesis:

-   El salario ofrecido por un lenguaje de programación no tiene una influencia directa en la salud mental de los programadores. Se espera que otros factores, como el ambiente laboral, tengan un impacto más significativo en la salud mental de los desarrolladores que el salario.

#### Pregunta 5:

-   ¿Existe una relación entre el sistema operativo utilizado en el trabajo y la salud mental de los individuos?

Hipótesis:

-   Se espera que sistema operativo utilizado en el ámbito profesional se relacione de forma débil con la salud mental de los individuos.

## Análisis Descriptivo

### Análisis Univariado

#### Salario

Veamos cómo se comporta el salario:

```{r}
summary(encuesta$Salary)
```

```{r}
encuesta %>%
 ggplot() +
  aes(x = Salary) +
  geom_density(adjust = 1L, fill = "#B8FFB8") +
  labs(
    x = "Salario anual en dolares",
    y = "Densidad",
    title = "Densidad Salarial"
  ) +
  theme_minimal()
```

Se puede visualizar que el salario de los desarrolladores se concentra mayormente entre 50 000 y 60 000 dólares anuales. Además, existe un gran sesgo a la derecha, ya que el promedio es mucho mayor a la media. Esto se debe a que hay muchas personas que trabajan con varios lenguajes de programación.

#### Lenguajes de programación

```{r}
CantUsers <- c()

for (lang in language){
  this <- encuesta[encuesta[lang] == TRUE,]
	cantidad <- nrow(this)
	CantUsers[lang] <- cantidad
}

CantUsers <- sort(CantUsers, decreasing = TRUE)

df1 <- data.frame(CantUsers)

barplot(df1$CantUsers, 
  main="Cantidad de usuarios por lenguaje de programación", 
  xlab="Lenguaje de programación", 
  ylab="Cantidad de usuarios",
  names.arg = row.names(df1),
  col=colorRampPalette(c("darkred", "red"))(15),
  xlim = c(0,50),
  ylim = c(0,20000),
  las=2,
  cex.names=0.5,
  cex.axis=0.5,
  )
```

Se visualiza que en nuestra muestra los lenguajes más conocidos son `JavaScript`, `HTML/CSS`, `SQL` entre otros. Exactamente estos lenguajes de programación son los más populares en Internet.

```{r}
planguages %>% arrange(desc(N_Usuarios)) -> OrdenUsuarios

barplot(OrdenUsuarios$N_Usuarios, 
        names.arg = OrdenUsuarios$Nombre,
        col = "pink",
        main = "Cantidad de usuarios por Lenguaje",
        xlab = "Lenguajes de programación",
        ylab = "N° usuarios",
        cex.names = 0.6,
        cex.axis = 0.7,
        ylim = c(0,8000000),
        las = 2
        )
```

Comparando la anterior gráfica de los lenguajes más populares de Stack Overflow, hay lenguajes que se repiten también en la otra base de datos de PLDB, como `SQL`, `JavaScript`, `HTML` entre otros.

### ¿Existe una relación entre el lenguaje de programación utilizado por un desarrollador y su salud mental?

Para responder a esta pregunta utilizaremos los siguientes descriptores gráficos:

#### Salud mental vs. Tecnologías de desarrollo

Vamos a crear un gráfico de barras por cada problema mental identificado. En el cuál pondremos una barra por cada lenguaje de programación

Recordemos que nuestros datos principales se llaman "encuesta"

> ##### Variables necesarias:

```{r}
memoria <- filter(encuesta, Memoria == TRUE)
ansiedad <- filter(encuesta, Ansiedad == TRUE)
emocional <- filter(encuesta, Emocional == TRUE)
autismo <- filter(encuesta, Autismo == TRUE)
aprendizaje <- filter(encuesta, Aprendizaje == TRUE)
```

#### Memoria:

```{r}
porcentajes <- c()

for (current in language){
	cantidad = nrow(memoria[memoria[[current]] == TRUE, ])
	cantidadTotal = nrow(encuesta[encuesta[[current]] == TRUE, ])
	porcentajes[current] <- cantidad/cantidadTotal
}

porcentajes <- sort(porcentajes, decreasing = TRUE)

porcentajes <- data.frame(porcentajes)

```

```{r}
porcentajeshelper <- porcentajes$porcentajes[1:15]
nombres <- rownames(porcentajes)[1:15]

barplot(porcentajeshelper, 
	main="% Personas que sufren de problemas de memoria", 
	xlab="Porcentaje de personas", 
	ylab = "Lenguaje de programación",
  col=colorRampPalette(c("darkblue", "blue"))(15),
	xlim = c(0,0.25),
	horiz=TRUE,
	las=1,
	names.arg=nombres,
	cex.names=0.5,
	cex.axis=0.5,
	)

porcentajeshelper <- porcentajes$porcentajes[25:40]
nombres <- rownames(porcentajes)[25:40]

barplot(porcentajeshelper, 
	main="% Personas que sufren de problemas de memoria", 
	xlab="Porcentaje de personas", 
	ylab = "Lenguaje de programación",
  col=colorRampPalette(c("darkblue", "blue"))(15),
	xlim = c(0,0.25),
	horiz = TRUE,
	las=1,
	names.arg = nombres,
	cex.names=0.5,
	cex.axis=0.5,
	)
```

Se ve que los desarrolladores que usan el lenguaje de programación de `Erlang` sufren más de memoria, mientras que los desarrolladores que usan `Java` son los que menos sufren memoria.

#### Ansiedad

```{r}
porcentajes <- c()

for (current in language){
	cantidad = nrow(ansiedad[ansiedad[[current]] == TRUE, ])
	cantidadTotal = nrow(encuesta[encuesta[[current]] == TRUE, ])
	porcentajes[current] <- cantidad/cantidadTotal
}

porcentajes <- sort(porcentajes, decreasing = TRUE)

porcentajes = data.frame(porcentajes)
```

```{r}
porcentajeshelper <- porcentajes$porcentajes[1:15]
nombres <- rownames(porcentajes)[1:15]

barplot(porcentajeshelper, 
	main="% Personas que sufren de problemas de Ansiedad", 
	xlab="Porcentaje de personas", 
  col=colorRampPalette(c("darkblue", "blue"))(15),
	xlim = c(0,0.16),
	horiz=TRUE,
	las=1,
	names.arg=nombres,
	cex.names=0.5,
	cex.axis=0.5,
	)

porcentajeshelper <- porcentajes$porcentajes[25:40]
nombres <- rownames(porcentajes)[25:40]

barplot(porcentajeshelper, 
	main="% Personas que sufren de problemas de Ansiedad", 
	xlab="Porcentaje de personas", 
  col=colorRampPalette(c("darkblue", "blue"))(15),
	xlim = c(0,0.16),
	horiz=TRUE,
	las=1,
	names.arg=nombres,
	cex.names=0.5,
	cex.axis=0.5,
	)
```

Se ve que los desarrolladores que usan el lenguaje de programación de `SAS` sufren más de ansiedad, mientras que los desarrolladores que usan `Julia` son los que menos sufren ansiedad.

#### Emocional:

```{r}
porcentajes <- c()

for (current in language){
	cantidad = nrow(emocional[emocional[[current]] == TRUE, ])
	cantidadTotal = nrow(encuesta[encuesta[[current]] == TRUE, ])
	porcentajes[current] <- cantidad/cantidadTotal
}

porcentajes <- sort(porcentajes, decreasing = TRUE)

porcentajes = data.frame(porcentajes)
```

```{r}
porcentajeshelper <- porcentajes$porcentajes[1:15]
nombres <- rownames(porcentajes)[1:15]

barplot(porcentajeshelper, 
	main="% Personas que sufren de problemas emocionales", 
	xlab="Porcentaje de personas", 
  col=colorRampPalette(c("darkblue", "blue"))(15),
	xlim = c(0,0.2),
	horiz=TRUE,
	las=1,
	names.arg=nombres,
	cex.names=0.5,
	cex.axis=0.5,
	)

porcentajeshelper <- porcentajes$porcentajes[25:40]
nombres <- rownames(porcentajes)[25:40]

barplot(porcentajeshelper, 
	main="% Personas que sufren de problemas emocionales", 
	xlab="Porcentaje de personas", 
  col=colorRampPalette(c("darkblue", "blue"))(15),
	xlim = c(0,0.2),
	horiz=TRUE,
	las=1,
	names.arg=nombres,
	cex.names=0.5,
	cex.axis=0.5,
	)
```

Se ve que los desarrolladores que usan el lenguaje de programación de `Erlang` sufren más de problemas emocionales, mientras que los desarrolladores que usan `F#` son los que menos sufren problemas emocionales.

#### Autismo

```{r}
porcentajes <- c()

for (current in language){
	cantidad = nrow(autismo[autismo[[current]] == TRUE, ])
	cantidadTotal = nrow(encuesta[encuesta[[current]] == TRUE, ])
	porcentajes[current] <- cantidad/cantidadTotal
}

porcentajes <- sort(porcentajes, decreasing = TRUE)

porcentajes = data.frame(porcentajes)
```

```{r}
porcentajeshelper <- porcentajes$porcentajes[1:15]
nombres <- rownames(porcentajes)[1:15]

barplot(porcentajeshelper, 
	main="% Personas que sufren de problemas de Autismo", 
	xlab="Porcentaje de personas", 
  col=colorRampPalette(c("darkblue", "blue"))(15),
	xlim = c(0,0.15),
	horiz=TRUE,
	las=1,
	names.arg=nombres,
	cex.names=0.5,
	cex.axis=0.5,
	)

porcentajeshelper <- porcentajes$porcentajes[25:40]
nombres <- rownames(porcentajes)[25:40]

barplot(porcentajeshelper, 
	main="% Personas que sufren de problemas de Autismo", 
	xlab="Porcentaje de personas", 
  col=colorRampPalette(c("darkblue", "blue"))(15),
	xlim = c(0,0.15),
	horiz=TRUE,
	las=1,
	names.arg=nombres,
	cex.names=0.5,
	cex.axis=0.5,
	)
```

Se observa que los desarrolladores que usan el lenguaje de programación de `Crystal` sufren más de problemas de autismo, mientras que los desarrolladores que usan `MATLAB` son los que menos sufren problemas de autismo.

#### Aprendizaje

```{r}
porcentajes <- c()

for (current in language){
	cantidad = nrow(aprendizaje[aprendizaje[[current]] == TRUE, ])
	cantidadTotal = nrow(encuesta[encuesta[[current]] == TRUE, ])
	porcentajes[current] <- cantidad/cantidadTotal
}

porcentajes <- sort(porcentajes, decreasing = TRUE)

porcentajes = data.frame(porcentajes)
```

```{r}
porcentajeshelper <- porcentajes$porcentajes[1:15]
nombres <- rownames(porcentajes)[1:15]

barplot(porcentajeshelper, 
	main="% Personas que sufren de problemas de Aprendizaje", 
	xlab="Porcentaje de personas", 
  col=colorRampPalette(c("darkblue", "blue"))(15),
	xlim = c(0,0.1),
	horiz=TRUE,
	las=1,
	names.arg=nombres,
	cex.names=0.5,
	cex.axis=0.5,
	)

porcentajeshelper <- porcentajes$porcentajes[25:40]
nombres <- rownames(porcentajes)[25:40]

barplot(porcentajeshelper, 
	main="% Personas que sufren de problemas de Aprendizaje", 
	xlab="Porcentaje de personas", 
  col=colorRampPalette(c("darkblue", "blue"))(15),
  xlim = c(0,0.1),
	horiz=TRUE,
	las=1,
	names.arg=nombres,
	cex.names=0.5,
	cex.axis=0.5,
	)
```

Se observa que los desarrolladores que usan el lenguaje de programación de `APL` sufren más de problemas de aprendizaje, mientras que los desarrolladores que usan `Delphi` son los que menos sufren problemas de aprendizaje.

De estos gráficos podemos identificar distintos lenguajes que generan problemas a los desarrolladores.

Tipos de problemas mentales:

-   Aprendizaje

    -   Entre las personas que sufren de problemas de aprendizaje, podemos identificar como principales a los siguientes lenguajes: **APL, SAS y LUA**.

-   Autismo

    -   Entre las personas que sufren problemas de autismo, podemos identificar como principales a los siguientes lenguajes: **Crystal, Lua, Julia y SAS.**

-   Emocionales

    -   Entre las personas que sufren problemas emocionales, podemos identificar como principales a **Erlang, Lua, SAS y Haskell.**

-   Ansiedad

    -   En cuanto a los problemas de ansiedad: **SAS, Lua y Ruby.**

-   Memoria

    -   Finalmente, en cuanto a las personas con problemas de memoria, podemos identificar a los siguientes lenguajes: **Erlang, Crystal y Lua.**

Resulta evidente la repetición de ciertos lenguajes en todos los tipos de problemas mentales, de los cuales destacan **SAS, Erlang, Crystal y Lua.** Dichos lenguajes parecen ser los más problemáticos. Mientras que los menos problemáticos parecen ser lenguajes como **Java, C++ o MATLAB**.

Podemos pensar entonces que el lenguaje de programación si afecta de cierta forma al estado mental de una persona ya sea por su complejidad, falta de información u otros factores. La relación se hace presente puesto que podemos separar a lenguajes "**problemáticos" (que producen mayor cantidad de problemas mentales)** de lenguajes **"poco problemáticos" (que producen una cantidad baja de problemas mentales)**.

Prontamente observaremos las causas por las que estos lenguajes son más "problemáticos".

### ¿Hay alguna relación entre la popularidad de un lenguaje de programación y la satisfacción laboral de los programadores que lo utilizan?

Para esto analizaremos los datos de los lenguajes de programación. Veremos entonces la lista de lenguajes más populares y compararemos.

```{r}
planguages %>% arrange(desc(N_Usuarios)) -> OrdenUsuarios

barplot(OrdenUsuarios$N_Usuarios, 
        names.arg = OrdenUsuarios$Nombre,
        col = "pink",
        main = "Cantidad de usuarios por Lenguaje",
        xlab = "Lenguajes de programación",
        ylab = "N° usuarios",
        cex.names = 0.6,
        cex.axis = 0.7,
        ylim = c(0,8000000),
        las = 2
        )

```

Entonces busquemos nuestros lenguajes más "problemáticos" y los "poco problemáticos" en base a su popularidad.

Rápidamente notaremos que son los lenguajes "poco problemáticos" (Java, C++, MATLAB) los que gozan de los primeros puestos en cuanto a popularidad se trata, por otro lado a los que calificamos como "problemáticos" se encuentran en puestos bajos (SAS, Lua, Erlang, Crystal).

Pero parémonos a analizar un momento y pensemos, ¿es la popularidad lo que está definiendo que un lenguaje sea "problemático", es decir, afecte negativamente en la salud mental de un desarrollador? O por otro lado, ¿es un lenguaje popular porque puede ser calificado como **"poco problemático"**?

```{r}
planguages %>% arrange(desc(N_Trabajos)) -> OrdenTrabajos

barplot(OrdenTrabajos$N_Trabajos, 
        names.arg = OrdenTrabajos$Nombre,
        col = "blue",
        main = "Cantidad de trabajados por Lenguaje",
        xlab = "Lenguajes de programación",
        ylab = "N° trabajados",
        cex.names = 0.6,
        ylim = c(0,250000),
        las = 2
        )
```

Si analizamos el número de trabajos por lenguaje notaremos la misma **tendencia** que se presentó en el de popularidad. Es natural puesto que si un lenguaje es más popular ha de tener mayor cantidad de trabajos y viceversa.

Aún es demasiado temprano para sacar conclusiones sobre si existe una relación clara entre la popularidad del lenguaje y su efecto en la salud mental, faltarían analizar otros factores que veremos ahora mismo.

### ¿Existe una relación entre el acceso a información relevante sobre un lenguaje de programación y la salud mental de los programadores que lo utilizan?

El acceso a la información, o la cantidad de documentación que existe sobre cierto lenguaje podría influir significativamente en la popularidad y la salud mental de un programador.

Analizaremos el siguiente gráfico:

```{r}
planguages %>% arrange(desc(Github_repos)) -> OrdenGithubrep

barplot(OrdenGithubrep$Github_repos, 
        names.arg = OrdenGithubrep$Nombre,
        col = "red",
        main = "Cantidad de repositorios en Github por Lenguaje",
        xlab = "Lenguajes de programación",
        ylab = "N° Repositorios en Github",
        cex.names = 0.6,
        cex.axis = 0.7,
        ylim = c(0,20000000),
        las = 2
        )
```

```{r}
planguages %>% arrange(desc(BigQuery_repos)) -> OrdenBigQueryrep

barplot(OrdenBigQueryrep$BigQuery_repos, 
        names.arg = OrdenBigQueryrep$Nombre,
        col = "green",
        main = "Cantidad de repositorios en BigQuery por Lenguaje",
        xlab = "Lenguajes de programación",
        ylab = "N° Repositorios en BigQuery",
        cex.names = 0.6,
        cex.axis = 0.7,
        ylim = c(0,1200000),
        las = 2
        )

```

Analizando los gráficos notaremos que son los lenguajes a los que clasificamos como **"poco problemáticos"** son los que presentan mayor número de repositorios disponibles (C++ y Java).

Por otro lado, notaremos que son justo los lenguajes **"problematicos"** los que presentan muchisimo menos número (por no decir cero) de repositorios (Erlang, Lua, SAS, Crystal).

Con este análisis la visión es distinta. Si lo vemos en conjunto con el de popularidad podríamos decir que es natural que los lenguajes más populares tengan mayor cantidad de contenido disponible en la web. Entonces notaremos una transitividad:

> Mayor popularidad del lenguaje -\> Mayor cantidad de repositorios -\> Menos "problemáticos"
>
> Menor popularidad del lenguaje -\> Menor cantidad de repositorios -\> Más "problemáticos"

### ¿Hay una relación entre el salario asociado a un lenguaje de programación y la salud mental de los programadores que lo utilizan?

Pero no solo es la popularidad o la cantidad de información acerca del lenguaje los que pueden ser factores que afecten a la salud mental del desarrollador. También podemos analizar el salario medio de cada lenguaje y ver como este afecta a la salud mental del desarrollador.

```{r}
promedios <- c()

for (current in language){
  this <- encuesta[encuesta[current] == TRUE,]
	promedio <- mean(this$Salary[language == current])
	promedios[current] <- promedio
}

promedios <- sort(promedios, decreasing = TRUE)

promedios <- data.frame(promedios)

porcentajeshelper <- promedios$promedios[1:15]
nombres <- rownames(promedios)[1:15]

barplot(porcentajeshelper, 
	main = "Promedio del Salario para cada Lenguaje de Programación", 
	xlab = "Promedio de salarios", 
	ylab = "Lenguaje de Programación",
  col=colorRampPalette(c("darkgreen", "green"))(15),
	horiz=TRUE,
	xlim = c(0, 140000),
	las=1,
	names.arg=nombres,
	cex.names=0.5,
	cex.axis=0.5,
	)

medianas <- c()

for (current in language){
  this <- encuesta[encuesta[current] == TRUE,]
	promedio <- median(this$Salary[language == current])
	medianas[current] <- promedio
}

medianas <- sort(medianas, decreasing = TRUE)
medianas <- data.frame(medianas)

porcentajeshelper <- medianas$medianas[1:15]
nombres <- rownames(medianas)[1:15]

barplot(porcentajeshelper, 
	main = "Mediana del Salario para cada Lenguaje de Programación", 
	xlab = "Medianas del Salario",
	ylab = "Lenguaje de Programación",
  col=colorRampPalette(c("darkgreen", "green"))(15),
	horiz=TRUE,
	xlim = c(0, 140000),
	las=1,
	names.arg=nombres,
	cex.names=0.5,
	cex.axis=0.5,
	)
```

Es curioso ver como los lenguaje más populares tienen un salario promedio mucho menor que el de los pocos populares.

Así mismo, parece ser que los lenguajes que identificamos como "problemáticos" tienen un mayor salario. Veamos como se comporta cada problema mental con respecto al salario.

```{r}
encuesta %>%
  select(Memoria, Emocional, Ansiedad, Autismo, Aprendizaje, Salary) %>%
  pivot_longer(cols = -Salary, names_to = "Problemas Mentales", values_to = "Sufre") %>%
  ggplot() +
  aes(x = Salary, y = `Problemas Mentales`, fill = Sufre) +
  geom_boxplot(alpha = 0.5) +
  theme_minimal()
```

En este gráfico podemos visualizar que efectivamente las personas que sufren un problema mental curiosamente ganan más que las personas que declararon no sufrir. Por lo que se puede deducir que tener un buen salario no necesariamente significa tener un estado de salud mental estable. Tal vez esto sucede debido a que los que sufren un problema mental tienen mayor carga laboral, por lo que ganan más dinero pero no tienen estabilidad mental.

### ¿Existe una relación entre el sistema operativo utilizado en el trabajo y la salud mental de los individuos?

#### Tablas Necesarias

```{r}
OP <- function(SisOp){
  SisOp <- substitute(SisOp)
  data.frame(ProfessionalOS = deparse(SisOp),
             TotalMemoria = sum(encuesta[[SisOp]] == TRUE & encuesta$Memoria == TRUE)/nrow(encuesta[encuesta[[SisOp]] == TRUE,]),
             TotalEmocional = sum(encuesta[[SisOp]] == TRUE & encuesta$Emocional == TRUE)/nrow(encuesta[encuesta[[SisOp]] == TRUE,]),
             TotalAnsiedad = sum(encuesta[[SisOp]] == TRUE & encuesta$Ansiedad == TRUE)/nrow(encuesta[encuesta[[SisOp]] == TRUE,]),
             TotalAutismo = sum(encuesta[[SisOp]] == TRUE & encuesta$Autismo == TRUE)/nrow(encuesta[encuesta[[SisOp]] == TRUE,]),
             TotalAprendizaje = sum(encuesta[[SisOp]] == TRUE & encuesta$Aprendizaje == TRUE)/nrow(encuesta[encuesta[[SisOp]] == TRUE,]),
             
             Total = sum(encuesta[[SisOp]] == TRUE)
             )
}
```

```{r}
tablaBSD <- OP(BSD)
tablaLinuxB <- OP(Linux_Based)
tablaWindows <- OP(Windows)
tablaWindowsLinux <- OP(Windows_for_Linux)
tablaMac <- OP(Mac)
```

```{r}
tabla_final <- rbind(tablaBSD, tablaLinuxB, tablaWindows, tablaWindowsLinux, tablaMac)
```

```{r}
tabla_larga <- tidyr::gather(tabla_final, 
                             key = "MentalHealth", 
                             value = "Cantidad Total", 
                             -ProfessionalOS)

tabla_larga <- tabla_larga[tabla_larga$MentalHealth != "Total", ]

ggplot(tabla_larga, 
       aes(x = ProfessionalOS, 
           y = `Cantidad Total`, 
           fill = ifelse(MentalHealth != "Total", MentalHealth, ""))) +
  geom_bar(stat = "identity", position = "dodge") + 
  labs(x = "Sistema Operativo para uso profesional", 
       y = "Cantidad Total de Personas", 
       fill = "MentalHealth") +
  ggtitle("Salud Mental vs. Sistemas Operativos") +
  theme_minimal()
```

En este gráfico podemos notar que no hay una relación clara entre la salud mental de los programadores y sus respectivos sistemas operativos, ya que podemos observar casi la misma proporción en cada uno. Los problemas más comunes son problemas de memoria, emocionales y de ansiedad. Pero, no podemos encontrar una relación directa entre ambas variables.

### Conclusiones Parciales

En síntesis, refiriéndose al análisis descriptivo, el estudio muestra correlaciones entre la popularidad, facilidad de uso y remuneración de un lenguaje de programación y la salud mental de los programadores. Sin embargo, no se puede establecer una relación directa y determinante entre dichos factores y el estado mental.

Aunque los lenguajes populares y bien documentados pueden proporcionar más recursos y apoyo a los desarrolladores, no son los únicos factores que influyen en el equilibrio emocional de una persona. Otros factores externos, como el ambiente laboral, el salario y el mercado, también desempeñan un papel importante en la salud mental de los programadores, independientemente del lenguaje de programación que utilicen.

Además, el estudio no encontró una relación directa entre los sistemas operativos utilizados y la salud mental de los desarrolladores. Esto sugiere que la elección del sistema operativo no es un factor determinante en la salud mental de los programadores.

En conclusión, el estudio destaca la importancia de considerar múltiples factores externos en lugar de atribuir el estado de salud mental de los programadores únicamente al lenguaje de programación utilizado. Los resultados muestran que los factores externos tienen un impacto significativo en el bienestar general de los desarrolladores, y es fundamental abordar estos factores para promover un entorno de trabajo saludable y apoyar la salud mental de los profesionales de la programación.

## Bibliografías

Stack Overflow (2022). *Stack Overflow Annual Developer Survey.* <https://insights.stackoverflow.com/survey>

PLDB (2023). *Programming Language Data Base.* <https://github.com/breck7/pldb>
