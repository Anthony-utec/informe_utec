---
title: "Informe"
output: 
  html_document:
    theme: flatly
    toc: TRUE
    toc_float:
      collapsed: FALSE
    number_sections: TRUE
---

# Tema del proyecto

Condiciones de vivienda de las personas en la ciudad de Lima Metropolitana.

## **Introducción**

### **Relevancia**

En este proyecto nos centraremos en examinar la situación de los hogares que residen en Lima Metropolitana durante el año 2020. La relevancia de este proyecto radica en su capacidad para proporcionar a los responsables de políticas y a los expertos en desarrollo social una comprensión más precisa de las tendencias de la pobreza, el bienestar y las condiciones de vida en Lima Metropolitana. Además, permitirá identificar posibles áreas de mejora y diseñar estrategias efectivas para abordar los desafíos que enfrentan los hogares en situación de vulnerabilidad.

### **Planificación**

![Diagrama de Gantt](Diagrama_gantt.png)

### **Objetivos**

#### Objetivo general

Analizar las características y condiciones de las viviendas en Lima metropolitana, mediante el análisis estadístico de la "Encuesta nacional de hogares" del INEI, para poder identificar tendencias y problemáticas en relación a la calidad de vida de los habitantes de la ciudad.

#### Objetivos específicos

1.  Determinar el tipo de material predominante de la vivienda e identificar como es la calidad de vida de las personas en su hogar.

2.  Determinar la proporción de viviendas con agua potable para su consumo y tiempo de acceso a esta.

3.  Comprender si la vivienda tuvo asistencia técnica de un Ing. Civil o arquitecto para su construcción.

4.  Encontrar la proporción de precio de alquiler respecto del número de habitaciones para dormir de una vivienda.

5.  Determinar la probabilidad, de una encuesta de 20 personas, que  8 tengan vivienda en Lima Metropolitana como máximo 2 habitaciones con distribución binomial.

6.  Determinar la probabilidad, de una muestra de 15 personas, que tengan vivienda en Lima Metropolitana con materiales hechos de ladrillo o bloque de cemento, por medio de la distribución geométrica.

7.  Identificar que variables son dependientes entre sí, según el teorema de la probabilidad condicional y su fórmula aplicada en Rstudio.

8.  Identificar las probabilidades según los gastos mensuales, como podrían ser los servicios básicos y plantear ejemplos para entender mejor los resultados.

### **Contexto**

En 2020, durante la pandemia del COVID-19, se llevaron a cabo encuestas en Lima Metropolitana. A pesar de las restricciones y la cuarentena impuesta, se adaptaron los métodos de recolección de datos, priorizando la seguridad de los participantes y encuestadores.

Estas encuestas se enfocaron principalmente en recopilar información sobre aspectos relacionados con la vivienda, como la calidad de vida, las condiciones económicas y el acceso a servicios básicos. Dado que el objetivo no estaba centrado directamente en la pandemia, las respuestas de los encuestados no se vieron afectadas por la crisis sanitaria y económica en curso.

A pesar de las circunstancias excepcionales, se logró obtener datos relevantes sobre la situación de las viviendas en Lima Metropolitana, lo que permitió obtener un panorama de las condiciones de vida de los residentes en ese momento.

### **Recolección de datos**

Obtuvimos la información de una base de  datos del INEI, el cual limpiamos y seleccionamos las variables más importantes para nuestro estudio.

### **Población, muestra y muestreo**

  ○ Población: Todas las viviendas de Lima metropolitana en el Perú.
  
  ○ Muestra: Viviendas encuestadas de Lima metropolitana.
  
  ○ Unidad muestral: Vivienda de una persona en Lima metropolitana.

### **Tamaño de la muestra: **  

567 viviendas encuestadas en Lima metropolitana en el año 2020
 
**Representatividad de la muestra:**

El tamaño de la muestra y el tipo de muestreo, y la reducción del sesgo dentro de lo posible, hace que la muestra sea representativa.
 
**Tipo de muestreo: **

El muestreo es de tipo probabilístico ya que el azar juega un papel muy importante dentro del mismo. Además es un muestreo aleatorio simple, ya que los elementos de la población que participan en la muestra son obtenidos  al azar de una base de datos, "Condiciones de vivienda del hogar", obtenida del INEI.

## **Variables**

| Variable               |                                                        Descripción                                                         |                    Tipo                     |
|:-----------------|:-----------------------------------:|:----------------:|
| Dominio                |                                              ¿Cuál es tu dominio geográfico?                                               |  [Cualitativa]{style="color:red"} ordinal   |
| T_vivienda             |                                                      Tipo de vivienda                                                      |  [Cualitativa]{style="color:red"} ordinal   |
| Número de Vivienda     |                                        ¿Cuál es tu número de selección de vivienda?                                        |  [Cualitativa]{style="color:red"} nominal   |
| mat_paredes_ext        |                                  ¿El material predominante en las paredes exteriores es ?                                  |  [Cualitativa]{style="color:red"} ordinal   |
| agua_p                 |                                                    ¿El agua es potable?                                                    |  [Cualitativa]{style="color:red"} nominal   |
| asist_tec              |                       ¿Su casa fue construída con asistencia técnica de un ing. Civil o arquitecto?                        |  [Cualitativa]{style="color:red"} nominal   |
| t_alumbrado            |                                     ¿Cuál es el tipo de alumbrado que tiene su hogar?                                      |  [Cualitativa]{style="color:red"} nominal   |
| serv_elect             |                                           ¿El servicio eléctrico de su hogar es:                                           |  [Cualitativa]{style="color:red"} ordinal   |
| procedencia_agua       |                                El agua que utilizan en el hogar ¿Procede principalmente de:                                |  [Cualitativa]{style="color:red"} ordinal   |
| emp_pago_agua          |                                 ¿A qué empresa o entidad se paga por el servicio de agua?                                  |  [Cualitativa]{style="color:red"} ordinal   |
| viv_ocup               |                                            ¿La vivienda que ocupa su hogar es?                                             |  [Cualitativa]{style="color:red"} ordinal   |
| acceso_agua            |                                            ¿Tienes acceso al servicio de agua?                                             |  [Cualitativa]{style="color:red"} nominal   |
| num_hab                |                                     ¿Cuántas habitaciones en total tiene la vivienda?                                      | [Cuantitativa]{style="color:blue"} discreta |
| num_hab_dormir         |                                 ¿Cuántas habitaciones se usan exclusivamente para dormir?                                  | [Cuantitativa]{style="color:blue"} discreta |
| precio_alquiler        |                Si Ud., alquilara esta vivienda, ¿Cuánto cree que le pagarían de alquiler mensual (en S/.)?                 | [Cuantitativa]{style="color:blue"} continua |
| precio_gasto_mes_agua  |        ¿Cuánto fue su último gasto mensual por consumo de agua (en S/. )?. Pagado, Agua. (Deflactado, Mensualizado)        | [Cuantitativa]{style="color:blue"} continua |
| precio_gasto_mes_elect | ¿Cuánto fue su último gasto mensual por consumo de electricidad ( en S/. )?.Pagado, Electricidad. (Deflactado, Anualizado) | [Cuantitativa]{style="color:blue"} continua |


## Base de datos - Librerias

### Librerias requeridas

```{r}
#Se instalaran los siguientes paquetes:
#install.packages("readxl", repos="https://cloud.r-project.org/")
#install.packages("dplyr", repos="https://cloud.r-project.org/")
#install.packages("modeest", repos="https://cloud.r-project.org/")
#install.packages("ggplot", repos="https://cloud.r-project.org/")
#install.packages("moments", repos="https://cloud.r-project.org/")
#install.packages("car", repos="https://cloud.r-project.org/")
#install.packages("rriskDistributions", repos="https://cloud.r-project.org/")
```

```{r}
#Se utilizaran las siguientes librerias:
library("readr")
library("dplyr")
library("modeest")
library("ggplot2")
library("moments")
library("car")
library("rriskDistributions")
```

### Lectura de base de datos

```{r}
Base_Filtrada <- read_csv2("Base_Filtrada.csv")
```

## **Análisis descriptivo**

#### Material de pared usado para la vivienda

```{r}
attach(Base_Filtrada)
par(mar=c(8,16,2,1))
par(col='red', col.axis='brown', col.lab='black', col.main='black', col.sub='purple')
par(bg='white')
barplot(table(Base_Filtrada$mat_paredes_ext),horiz = TRUE,las=2, main="Gráfico 1: Material de pared usado para vivienda", xlab = "Cantidad de viviendas", col=c("skyblue","pink","gold","red","blue","green"))

```

#### Cantidad de viviendas que tienen acceso al servicio de agua

```{r}
# Gráfico de barras de la variable "horas_agua"
barplot(table(Base_Filtrada$acceso_agua), main = "Gráfico 2: Acceso al agua potable", xlab = "Viviendas que tienen acceso", horiz=TRUE,cex.names = 0.7,las=2, col = "blue")

#Tabla de las viviendas que tienen acceso a agua
table(Base_Filtrada$acceso_agua)
```


#### Asistencia técnica de Ing.Civil o arquitecto en una vivienda

```{r}
#Gráfico 
par(mar = c(6, 16, 2, 15))
par(col='blue', col.axis='red', col.lab='black',
    col.main='#005981', col.sub='purple')
par(bg='darkseagreen1')
barplot(table(Base_Filtrada$asist_tec),horiz=TRUE,las=2,xlab = "Cantidad de personas", col=c("#fafa6e","#c8f073","#97e47d","#65d689"),main = "Gráfico 3: Asistencia técnica de Ing.Civil o arquitecto")

```


#### Relación precio de alquiler y número de habitaciones para dormir
```{r}
#Gráfico 
boxplot(Base_Filtrada$precio_alquiler~Base_Filtrada$num_hab_dormir,col=c("darkgray","red","green"),main="Precio de alquiler de acuerdo al núm. de habitaciones para dormir",ylim = c(0,2500),xlim = c(0,8),ylab = "precio de alquiler", xlab = "número de habitaciones para dormir")
```

Análisis: 

En los boxplots podemos observar que nos indican los rangos de precio según el número de habitaciones, por ejemplo, una vivienda con 3 habitaciones para dormir está en un rango de 500 a 1200 soles, según nuestra base de datos.

### Conclusiones del análisis descriptivo

1. Mayormente se usa el material de ladrillo para construir una vivienda, además en los gráficos de barras se observa que el material de ladrillo tiene la barra mas grande corroborando que la media y mediana se encontrarían ahí.

2. Un mayor número de personas tiene acceso al agua en comparación con aquellos que afirman no tener acceso a este recurso, gracias al gráfico usado es fácil identificar este dato.

3. En los gráficos de barras es para observar que cantidad sabe si su vivienda fue construida por un Ing.Cívil o Arquitecto. En la barra que lleva la opción "No"(eje x) hay un total de 268 datos, esta tiene la mayor cantidad de viviendas, para "Si" se recolectaron 214 datos y por último para la opción "No sabe" hay un total de 85 datos, esta tiene la menor cantidad de vivienda, es decir hay una menor cantidad de personas que estan desinformadas sobre la construcción de su vivenda.

4. En los boxplots podemos observar que nos indican los rangos de precio según el número de habitaciones, por ejemplo, una vivienda con 3 habitaciones para dormir está en un rango de 500 a 1200 soles, según nuestra base de datos.


## **Análisis Probabilístico**

### Probabilidad Empírica

#### • Variable: Número de habitaciones

#### Definicion del experimento:

Seleccionar a una persona que tenga una vivienda en Lima metropolitana y observar el número de habitaciones que tiene.

**Espacio muestral**={1,2,3,4,5,6,7,8,9,10,11,12,13}

$$
\Omega = (1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 13)
$$

```{r}
numero_de_habitaciones <- c(Base_Filtrada$num_hab)
frecuencia <- table(numero_de_habitaciones)
print(frecuencia)
```

#### Tamaño de la muestra:

```{r}
sum(table(Base_Filtrada$num_hab))
```

#### Definicion de eventos:

1)La cantidad de 1 habitación en una muestra de tamaño 567 2)La cantidad de 2 habitaciones en una muestra de tamaño 567. 3)La cantidad de 3 habitaciones en una muestra de tamaño 567. 4)La cantidad de 4 habitaciones en una muestra de tamaño 567. 5)La cantidad de 5 habitaciones en una muestra de tamaño 567. 6)La cantidad de 6 habitaciones en una muestra de tamaño 567. 7)La cantidad de 7 habitaciones en una muestra de tamaño 567. 8)La cantidad de 8 habitaciones en una muestra de tamaño 567. 9)La cantidad de 9 habitaciones en una muestra de tamaño 567. 10)La cantidad de 10 habitaciones en una muestra de tamaño 567. 11)La cantidad de 11 habitaciones en una muestra de tamaño 567. 12)La cantidad de 12 habitaciones en una muestra de tamaño 567. 13)La cantidad de 13 habitaciones en una muestra de tamaño 567.

#### Probabilidad de los eventos

```{r}
fi=table(Base_Filtrada$num_hab)
hi=round(prop.table(fi),4)
cbind(fi,hi)
sum(hi)
```

**Análisis**: Hay una mayor probabilidad de que una persona con vivienda en Lima metropolitana tenga 4 habitaciones.

#### • Variable: Asistencia Técnica

#### Definicion del experimento:

Seleccionar a una persona que tenga una vivienda en Lima metropolitana y observar el número de habitaciones que tiene.

**Espacio muestral** :{No, No sabe,Si,}

$$
\Omega = (No, No-sabe,Si,)
$$

```{r}
Asitencia_técnica <- c(Base_Filtrada$asist_tec)
frecuencia <- table(Asitencia_técnica)
print(frecuencia)
```

#### Tamaño de la muestra

```{r}
sum(table(Base_Filtrada$asist_tec))
```

#### Definicion de eventos

1)La cantidad de personas que tienen vivienda en Lima metropolitana que no tuvieron asistencia técnica para su construcción en una muestra de tamaño 567. 2)La cantidad de personas que tienen vivienda en Lima metropolitana que no saben si tuvieron asistencia técnica para su construcción en una muestra de tamaño 567. 3)La cantidad de personas que tienen vivienda en Lima metropolitana que si tuvieron asistencia técnica para su construcción en una muestra de tamaño 567.

#### Probabilidad de los eventos

```{r}
fi=table(Base_Filtrada$asist_tec)
hi=round(prop.table(fi),4)
cbind(fi,hi)
```

Hallar la probabilidad de que una persona con vivienda en Lima metropolitana tenga 6 habitaciones. 
$$
P(X=6) = 0.0653
$$

Hallar la probabilidad de que una persona con vivienda en Lima metropolitana tenga como maximo 4 habitaciones. 
$$
P(X=1)+P(X=2)+P(X=3)+P(X=4) = 0.6931
$$

Hallar la probabilidad de que una persona con vivienda en Lima metropolitana tenga como minimo 10 habitaciones. 
$$
P(X=10)+P(X=11)+P(X=12)+P(X=13) = 0.0071
$$

### Probabilidad Condicional

#### • Variables Dependientes:

#### Definicion del experimento:
Para este experimento se tomaron 2 variables, las variables escogidas fueron agua_p (Si posee agua potable o no la posee) y procedencia_agua (De donde proviene el agua que consumen).

$$
Espacio\ muestral\ agua\ potable = (Si, No)
$$

$$
Espacio\ muestral\ procedencia\ del\ agua = (
Red\ pública, dentro\ de\ la\ vivienda;\ Red\ pública, fuera\ de\ la\ vivienda\ pero\\ dentro\ del\ edificio;\ 
Pilón\ de\ uso\ público;\ Camión–cisterna\ u\ otro\ similar;\ Pozo; \ Río/acéquia/lago/laguna; \ Otra)
$$


#### Tamaño de la muestra:

```{r}
sum(table(Base_Filtrada$agua_p))
```
$$
El\ tamaño\ de\ la\ muestra\ es\ de\ 576 
$$
#### Definicion de eventos:

1)La cantidad de personas que tienen vivienda en Lima metropolitana que poseen agua potable en una muestra de tamaño de 567. 

2)La cantidad de personas que tienen vivienda en Lima metropolitana que la procedencia del agua sea una Red publica que este dentro de la vivienda en una muestra de tamaño de 567

#### Probabilidad de los eventos

Sacaremos las probabilidades de cada una de las respuestas según las variables que utilicemos


En el caso del agua potable este seria las probabilidades 
```{r}
tabla_frecuencia1 <- table(Base_Filtrada$agua_p)
probabilidad <- prop.table(tabla_frecuencia1)
print(probabilidad)
```
Como se muestra, ahí están las probabilidades de que no tengan agua, así como también aparece la probabilidad que si posean agua

En el caso de las probabilidades de la procedencia del agua son las siguientes
```{r}
tabla_frecuencia1 <- table(Base_Filtrada$procedencia_agua)
probabilidad <- prop.table(tabla_frecuencia1)
print(probabilidad)
```


Para hallar la probabilidad utilizaremos siguiente teorema

$$
P(B|A)=P(A)
$$
```{r}
# Calculo de la probabilidad condicional P(B|A)
condicional_dependiente <- subset(Base_Filtrada, agua_p == "Si")
prob_condicional_dependiente <- sum(condicional_dependiente$procedencia_agua == "Red pública, dentro de la vivienda") / nrow(condicional_dependiente)
print(prob_condicional_dependiente)
```
En este caso la probabilidad condicional de que pasen los dos eventos es la siguiente

$$
P(B|A)=0.9678571
$$
La probabilidad empírica de B

```{r}
# Calculo de la probabilidad empírica de B
prob_empirica_dependienteB <- sum(Base_Filtrada$procedencia_agua == "Red pública, dentro de la vivienda") / nrow(Base_Filtrada)
print(prob_empirica_dependienteB)
```
$$
P(B)=0.9647266
$$
En este caso, no cumple que cumpla la independencia, ya que ninguno de los dos son iguales con los decimales.

Así mismo se podría hallar la probabilidad empírica de A y multiplicarlo por B para poder saber si tambien nos cumple



```{r}
# Calculo de la probabilidad empírica de A
prob_empirica_dependienteA <- sum(Base_Filtrada$agua_p == "Si") / nrow(Base_Filtrada)

print(prob_empirica_dependienteA)
print(prob_empirica_dependienteA*prob_empirica_dependienteB)

```
$$
P(A)=0.9876543\\ P(A)*P(B)=0.9528164
$$
Como bien se muestra en los resultados el 90 porciento de la probabilidad condicional, esto indica una fuerte dependencia entre los eventos A y B, donde la presencia o ocurrencia de A tiene un alto impacto en la probabilidad de ocurrencia de B.
Así mismo también se demuestra que al no ser iguales por los decimales, no tienen independencia.


#### • Variables Independientes

#### Definicion del experimento:
Para este experimento se tomaron 2 variables, las variables escogidas fueron agua_p (Si posee agua potable o no la posee) y el material de paredes externas (ladrillo, madera,).

$$
Espacio\ muestral\ agua\ potable = (Si, No)
$$
$$
Espacio\ muestral\ materiales\ paredes\ externas =  (Ladrillo\ o\ bloque\ de\ cemento; Piedra\ o\ sillar\\ con\ cal\ o\ cemento ; \ Adobe;\ Tapia;\ Quincha;\ Piedra\ con\ barro;\ Madera;\  Triplay/calamina/estera; \ Otro\ material)
$$


#### Tamaño de la muestra:

```{r}
sum(table(Base_Filtrada$agua_p))
```
$$
El\ tamaño\ de\ la\ muestra\ es\ de\ 576 
$$
#### Definicion de eventos:

1)La cantidad de personas que tienen vivienda en Lima metropolitana que no posean agua potable en una muestra de tamaño de 567. 

2)La cantidad de personas que tienen vivienda en Lima metropolitana que el material de las paredes externas sea madera en una muestra de tamaño de 567

#### Probabilidad de los eventos

Sacaremos las probabilidades de cada una de las respuestas según las variables que utilicemos


En el caso del agua potable este seria las probabilidades 
```{r}
tabla_frecuencia1 <- table(Base_Filtrada$agua_p)
probabilidad <- prop.table(tabla_frecuencia1)
print(probabilidad)
```
Como se muestra, ahí están las probabilidades de que no tengan agua, así como también aparece la probabilidad que si posean agua

En el caso de las probabilidades del material de paredes externas son las siguientes
```{r}
tabla_frecuencia1 <- table(Base_Filtrada$mat_paredes_ext)
probabilidad <- prop.table(tabla_frecuencia1)
print(probabilidad)
```


Para hallar la probabilidad utilizaremos siguiente teorema

$$
P(B|A)=P(A)
$$
```{r}
# Probabilidad condicional: P(Agua Potable = "NO" | Materiales Paredes = "Madera")
prob_cond_independiente <- sum(Base_Filtrada$agua_p == "No" & Base_Filtrada$mat_paredes_ext == "Madera") / sum(Base_Filtrada$mat_paredes_ext == "Madera")
print(prob_cond_independiente)
```
En este caso la probabilidad condicional de que pasen los dos eventos es la siguiente
$$
P(B|A)=0.02702703
$$
La probabilidad empírica de B

```{r}
# Calculo de la probabilidad empírica de B
prob_materiales_paredes <- sum(Base_Filtrada$mat_paredes_ext == "Madera") / length(Base_Filtrada$mat_paredes_ext)
print(prob_materiales_paredes)
```
$$
P(B)=0.06525573
$$
En este caso, no cumple que cumpla la independencia, ya que ninguno de los dos son iguales con los decimales.

Así mismo se podría hallar la probabilidad empírica de A y multiplicarlo por B para poder saber si también nos cumple

```{r}
prob_agua_potable <- sum(Base_Filtrada$agua_p == "No" ) / length(Base_Filtrada$agua_p)
print(prob_agua_potable)
print(prob_materiales_paredes*prob_agua_potable)
```
$$
P(A)=0.01234568\\ P(A)*P(B)= 0.0008056263
$$
Como bien se muestra en los resultados el 90 porciento de la probabilidad condicional, esto indica una fuerte dependencia entre los eventos A y B, donde la presencia o ocurrencia de A tiene un alto impacto en la probabilidad de ocurrencia de B.
Así mismo también se demuestra que al no ser iguales por los decimales, no tienen independencia.

## **Variables Aleatorias Discretas**

### Variable: Número de habitaciones (num_hab)

#### Definimos el ensayo Bernoulli

```{r}
fi=table(Base_Filtrada$num_hab)
hi=round(prop.table(fi),4)
cbind(fi,hi)
```

```{r}
p <-nrow(Base_Filtrada %>% filter(num_hab<=2))/nrow(Base_Filtrada)
n <-nrow(Base_Filtrada)
p
n
```

**Ensayo Bernoulli** : Definiremos nuestro éxito como las personas que tienen una vivienda en Lima Metropolitana como máximo 2 habitaciones.

$$
p = Probabilididad\ de\ éxito\\p = 0.1305115
$$

###### Valor Esperado

$$
E(X) = p = 0.1305115
$$
###### Varianza

$$
V(X) = p(1-p) = q = 0.8694885
$$

#### Definimos la distribución que se usará (Binomial)

*Ensayo Binomial: * Determinar la cantidad de personas encuestadas que tienen casa en Lima Metropolitana con reposición(se puede volver a encuestar a la misma persona) como máximo 2 habitaciones en una muestra aleatoria.


##### Variable aleatoria Discreta

$$
X = La\ cantidad\ de\ personas\ encuestadas\ que\ tiene\ vivienda\ en\ Lima\ Metropolitana\\ como\ máximo\ 2\ habitaciones\ en\ una\ muestra\ de\ 20\ personas\
$$

###### Rango de la variable aleatoria

$$
Rx =(0;2;3;...;20)
$$ 


$$
X\sim B(n = 20,p = 0.1305115)
$$

##### Función probabilidad

Nuestra muestra de 20 personas tiene las mismas condiciones o características que nuestra cantidad de 567 personas de muestra base de datos.
```{r}
plot(type = "h",dbinom(0:20,size=20,prob = 0.1305115), main = "Función de probabilidad de la Binomial de la variable X", ylab = "Probabilidad", xlab = "Cantidad de personas que tienen una vivienda en Lima Metropolitana como máximo 2 habitaciones.",xlim=c(0,20))
```

**Interpretación**: La probabilidad de tener 5 personas que tienen una vivienda en Lima Metropolitana como máximo 2 habitaciones es la mayor de todas y a partir de de tener 9 personas para adelante sus probabilidades casi llegan a 0, lo que podemos concluir que es muy poco probables que tengan como máximo 2 habitaciones.

##### Propiedades

```{r}
n=20
p=0.1305115
```

###### Valor Esperado
$$
E(X)=np
$$

```{r}
E <- n*p
E
```

###### Varianza 
$$
Var(X)=np(1-p)
$$

```{r}
Var = n*p*(1-p)
Var
```

##### Ejemplos

1. Determinar la probabilidad de que 8 personas encuestadas con vivienda en Lima metropolitana tengan como máximo 2 habitaciones en una muestra de 20 personas.

$$
P(X=2)\ -> dbinom(8,20,0.1305115)
$$

```{r}
dbinom(8,20,0.1305115)
```

2.Determinar la probabilidad de que mínimo 5 personas encuestadas con vivienda en Lima metropolitana tengan como máximo 2 habitaciones en una muestra de 20 personas.

$$
P(X≤5)\ -> pbinom(5,20,0.1305115)
$$

```{r}
pbinom(5,20,0.1305115)
```


### Variable: Material de paredes externas (mat_paredes_ext)

#### Definimos el ensayo Bernoulli

Se selecciono una variable tipo cualitativa.

```{r}
Base_Filtrada$mat_paredes_ext = recode(Base_Filtrada$mat_paredes_ext, "'Ladrillo o bloque de cemento'= 1;'Piedra o sillar con cal o cemento '= 2;'Adobe'=3; 'Tapia'= 4; 'Quincha'= 5; 'Piedra con barro'=6; 'Madera'=7;'Triplay/calamina/estera'= 8;'Otro material'=9")

# 1=Ladrillo o bloque de cemento
# 2=Piedra o sillar con cal o cemento 
# 3=Adobe
# 4=Tapia
# 5=Quincha (caña con barro) 
# 6=Piedra con barro
# 7=Madera (pona, tornillo, etc.) 
# 8=Triplay/calamina/estera
# 9=Otro material
# (Rango : 1 - 9)
```


```{r}
fi=table(Base_Filtrada$mat_paredes_ext)
pi=round(prop.table(fi)*100,2)
cbind(fi,pi)
```
Función probabilidad

```{r}
fi=table(Base_Filtrada$mat_paredes_ext)
pi=round(prop.table(fi),4)
pi
```
```{r}
# Exito:
p <-nrow(Base_Filtrada %>% filter(mat_paredes_ext=="1"))/nrow(Base_Filtrada)
n <-nrow(Base_Filtrada)
p
# n= tamaño de muestra
n
```


**Ensayo Bernoulli:** Definiremos nuestro **éxito** como las personas que escojan una vivienda de ladrillo o bloque de cemento como primera opción.

$$
p = Probabilididad\ de\ éxito\\p = 0.8836
$$


#### Definimos la distribución que se usará (Geométrica)

**Ensayo Geométrico:** Revisar las viviendas hasta encontrar la primera que tenga ladrillo o bloque de cemento como material de paredes externas.

$$
P(X=x) = q^{x-1}*p\\P(X=x)\ Función\ probabilidad\ de \ la\ variable\ aleatoria\ con\ distribución\ geométrica\\ X= Número\ de\ experimentos\ hasta\ que\ aparece\ el\ primer\ exito\\p = Probabilididad\ de\ éxito\\ q=Probabilidad\ de\ fracaso \ (1-p)
$$

##### Variable aleatoria Discreta

$$
X = Número\ de\ entrevistas\ necesarias\ hasta\ de\ encontrar\ a\ una\ persona\ que\ escogio\ una\ vivienda\\ de\ ladrillo\ o \ bloque\ de\ cemento\ en\ una\ muestra\ de\ 15\ personas
$$
###### Rango de la variable aleatoria

$$
Rx =(0;1;2;3..;15)
$$

##### Función probabilidad

La muestra de 15 personas para la distribución geométrica tiene las mismas condiciones o características que la muestra de 567 personas en la base de datos.


```{r}
library(ggplot2)

# Parámetros de la distribución geométrica
p <- 0.8835979
x <- 0:15

# Calcular las probabilidades de la distribución geométrica
probabilidades <- dgeom(x, p)

# Crear un data frame con los datos
df <- data.frame(x = x, probabilidad = probabilidades)

# Crear el gráfico utilizando ggplot2
ggplot(df, aes(x = x, y = probabilidad)) +
  geom_line(color = "steelblue", size = 1) +
  geom_point(color = "steelblue", size = 3) +
  labs(title = "Distribución Geométrica",
       x = "Número de entrevistas",
       y = "Probabilidad") +
  theme_minimal()
```

$$
Interpretación\\
1.\ Es\ muy\ probable\ que\ halla\ cero\ fallos\ hasta\ tener\ el\ primer\ éxito.\\
2.\ Es\ poco\ probable\ que\ halla\ tres\ o\ más fallos\ hasta\ tener\ el\ primer\ éxito.\
$$


##### Propiedades

```{r}
n=15
p=0.8835979
```

###### Valor Esperado
$$
E(\mathbb{X})=\sum_{k=1}^\infty kp(k)= \sum_{k=1}^\infty k(1-p)^{k-1}p=\frac{1}{p}
$$
```{r}
E <- 1/p
E
```

###### Varianza 

$$
Var(\mathbb{X})=\frac{1-p}{p^2}
$$

```{r}
Var = (1-p)/p^{2}
Var
```

##### Ejemplos

1) Determinar la probabilidad de escoger a una persona que selecciona una vivienda de ladrillo o  bloque de cemento, despues de entrevistar a 3 personas.
(X=3,prob=0.8835979)

```{r}
dgeom(x=3, prob=0.8835979)
```

2) Determinar la probabilidad de escoger a una persona que selecciona una vivienda de ladrillo o  bloque de cemento, despues de entrevistar a 5 personas.
(X=5,prob=0.8835979)

```{r}
dgeom(x=5, prob=0.8835979)
```


## **Variables Aleatorias Continuas**


La variable que utilizaremos son:

## Variable: Precio del gasto mensual de la electricidad (precio_gasto_mes_elect)

```{r}
densidad_elec <- density(Base_Filtrada$precio_gasto_mes_elect)

plot(densidad_elec, main = "Gráfico de Densidad", xlab = "Valores", ylab = "Densidad")
```

```{r}
library("rriskDistributions")
fit.cont(Base_Filtrada$precio_gasto_mes_elect)
```

El alpha segun el fit.cont fue 2.885202923
  
y el beta es el de 1/0.002580291 

en donde beta es 387.5532

#### Valor esperado de la gráfica de distribución
E(X)= α * β

```{r}
alpha_elec=2.885202923
beta_elec=387.5532

E_elec=alpha_elec*beta_elec
print(E_elec)
```
#### Media de la variable

```{r}
mean(Base_Filtrada$precio_gasto_mes_elect)
median(Base_Filtrada$precio_gasto_mes_elect)
```

#### Varianza de la gráfica de distribución

V(x)=$α * β^2$
```{r}
(V = alpha_elec*(beta_elec^2))
```

#### varianza de la variable
```{r}
var(Base_Filtrada$precio_gasto_mes_elect)
```

### variable aleatoria continua

Definimos la V.A.

X: costo del consumo de electricidad, de una vivienda, al mes

* Cuál es la probabilidad que el costo sea mayor a 1300 soles
P(X>1300)

```{r}
1-pgamma(1300,alpha_elec,1/beta_elec)
```

Determinar la probabilidad que el costo sea a lo máximo 500 soles.
P(X<=500)

```{r}
pgamma(500,alpha_elec,1/beta_elec)
```
Determinar la probabilidad que el costo de la electricidad esté en el rango de 700 a 1900 soles.
P(700<=X<=1900)

```{r}
pgamma(1900,alpha_elec,1/beta_elec) - pgamma(700,alpha_elec,1/beta_elec)
```
Dado que la media del costo de la electricidad es menor a 1120 soles. Determinar la probabilidad que el costo sea mayor a 950 soles.

P(X>950/X<1120) = P(950<x<1120)/P(X>1120)
```{r}
(pgamma(1120,alpha_elec,1/beta_elec)-pgamma(950,alpha_elec,1/beta_elec))/pgamma(1120,alpha_elec,1/beta_elec)
```

## Variable: Precio del gasto mensual del agua (precio_gasto_mes_agua)

```{r}
densidad_agua <- density(Base_Filtrada$precio_gasto_mes_agua)
plot(densidad_agua, main = "Gráfico de Densidad", xlab = "Valores", ylab = "Densidad")
```


```{r}
fit.cont(Base_Filtrada$precio_gasto_mes_agua)
```
Según el comando "fit.cont" la variable precio_gasto_mes_agua no se ajusta a ningún modelo de distribución de densidad, por ende, hemos reducido la cantidad de datos de la variable para "forzar" a que se asemeje a una y poder realizar las validaciones de distribución pepidas en el proyecto.

Delimitamos la variable con el comando filter
```{r}
(delim <- filter(Base_Filtrada,precio_gasto_mes_agua <= 1400))
```
#### Densidad de la variable
```{r}
densidad_agua <- density(delim$precio_gasto_mes_agua)
plot(densidad_agua, main = "Gráfico de Densidad", xlab = "Valores", ylab = "Densidad")
```

```{r}
fit.cont(delim$precio_gasto_mes_agua)
```
El alpha segun el fit.cont fue 3.68206545 
  
y el beta es el de 1/0.00671317  

en donde beta es 148.9609

#### Valor esperado de la gráfica de distribución
E(X)= α * β
```{r}
alpha_agua=3.68206545
(beta_agua=1/0.00671317 )

E_agua=alpha_agua*beta_agua
print(E_agua)
```
#### Media de la variable

```{r}
mean(Base_Filtrada$precio_gasto_mes_agua)
median(Base_Filtrada$precio_gasto_mes_agua)
```

#### Varianza de la gráfica de distribución

V(x)=$α * β^2$
```{r}
(V2 = alpha_agua*(beta_agua^2))
```

#### Varianza de la variable
```{r}
var(Base_Filtrada$precio_gasto_mes_agua)
```
### variable aleatoria continua

Definimos la V.A.
X: costo del consumo de agua, de una vivienda, al mes

Determinar la probabilidad de que el costo sea menor a 548 soles.
P(X<548)
```{r}
pgamma(548,alpha_agua,1/beta_agua)
```

Determinar la probabilidad que el costo sea a lo máximo 500 soles.
P(X<=500)
```{r}
pgamma(500,alpha_agua,1/beta_agua)
```

Determinar la probabilidad que el costo del agua esté en el rango de 50 a 300 soles.
P(50<=X<=300)
```{r}
pgamma(300,alpha_agua,1/beta_agua) - pgamma(50,alpha_agua,1/beta_agua)
```

Determinar el costo máximo del agua para que la vivienda se encuentre dentro del 46% de viviendas con menores costos de consumo de agua.
P(x <= k) = 0.46

```{r}
qgamma(0.46,alpha_agua,1/beta_agua)
```
El valor máximo para pertenecer al 46% de los menores costos es 473.0344 soles.

### Conclusiones del análisis probabilístico

1. La probabilidad de que 8 personas tengan vivienda en Lima Metropolitana como máximo 2 habitaciones en una encuesta de 20 personas es de 0.00197981 y tuvo su simulación por medio de la distribución Binomial.

2. La probabilidad de que en una muestra de 15 entrevistados, las personas escojan una vivienda de ladrillo o bloque de cemento como primera opción es 0.8835979 y tuvo su simulación por medio de la distribución geométrica.

3. Al analizar las variables de procedencia del agua y si poseía agua, identificamos una clara dependencia entre ellas. Aunque las probabilidades de independencia de los eventos parecían similares a las probabilidades empíricas, ciertas cifras revelaron que existía una conexión entre ambas variables.

4. Al emplear la librería "rriskDistributions" y su función "fit.cont", logramos determinar que la variable del precio mensual de la electricidad se ajusta a una distribución gamma. Además, confirmamos la idoneidad de esta distribución al comparar la esperanza y la media, encontrando que coincidían. Este análisis nos brindó una comprensión más profunda del comportamiento de la variable y nos permitió utilizar la "distribución gamma" como un modelo adecuado para su estudio y predicción.






